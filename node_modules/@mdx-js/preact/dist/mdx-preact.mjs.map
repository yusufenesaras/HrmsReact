{"version":3,"file":"mdx-preact.mjs","sources":["../src/context.js","../src/create-element.js"],"sourcesContent":["/* @jsx h */\n// eslint-disable-next-line\nimport { createContext, h } from \"preact\";\nimport {useContext} from 'preact/hooks'\n\nconst isFunction = obj => typeof obj === 'function'\n\nconst MDXContext = createContext({})\n\nexport const withMDXComponents = Component => props => {\n  const allComponents = useMDXComponents(props.components)\n  return <Component {...props} components={allComponents} />\n}\n\nexport const useMDXComponents = components => {\n  const contextComponents = useContext(MDXContext)\n\n  // Custom merge via a function prop\n  if (isFunction(components)) {\n    return components(contextComponents)\n  }\n\n  return {...contextComponents, ...components}\n}\n\nexport const MDXProvider = ({components, children, disableParentContext}) => {\n  let allComponents = useMDXComponents(components)\n\n  if (disableParentContext) {\n    allComponents = components\n  }\n\n  return (\n    <MDXContext.Provider value={allComponents}>{children}</MDXContext.Provider>\n  )\n}\n\nexport default MDXContext\n","import {h, Fragment} from 'preact'\nimport {forwardRef} from 'preact/compat'\n\nimport {useMDXComponents} from './context'\n\nconst TYPE_PROP_NAME = 'mdxType'\n\nconst DEFAULTS = {\n  inlineCode: 'code',\n  wrapper: ({children}) => h(Fragment, {}, children)\n}\n\nconst MDXCreateElement = forwardRef((props, ref) => {\n  const {\n    components: propComponents,\n    mdxType,\n    originalType,\n    parentName,\n    ...etc\n  } = props\n\n  const components = useMDXComponents(propComponents)\n  const type = mdxType\n  const Component =\n    components[`${parentName}.${type}`] ||\n    components[type] ||\n    DEFAULTS[type] ||\n    originalType\n\n  if (propComponents) {\n    return h(Component, {\n      ref,\n      ...etc,\n      components: propComponents\n    })\n  }\n\n  return h(Component, {ref, ...etc})\n})\n\nMDXCreateElement.displayName = 'MDXCreateElement'\n\nexport default function (type, props) {\n  const args = arguments\n  const mdxType = props && props.mdxType\n\n  if (typeof type === 'string' || mdxType) {\n    const argsLength = args.length\n\n    const createElementArgArray = new Array(argsLength)\n    createElementArgArray[0] = MDXCreateElement\n\n    const newProps = {}\n    for (let key in props) {\n      if (hasOwnProperty.call(props, key)) {\n        newProps[key] = props[key]\n      }\n    }\n\n    newProps.originalType = type\n    newProps[TYPE_PROP_NAME] = typeof type === 'string' ? type : mdxType\n\n    createElementArgArray[1] = newProps\n\n    for (let i = 2; i < argsLength; i++) {\n      createElementArgArray[i] = args[i]\n    }\n\n    return h.apply(null, createElementArgArray)\n  }\n\n  return h.apply(null, args)\n}\n"],"names":["MDXContext","createContext","withMDXComponents","Component","props","allComponents","useMDXComponents","components","contextComponents","useContext","MDXProvider","children","disableParentContext","Provider","value","DEFAULTS","inlineCode","wrapper","h","Fragment","MDXCreateElement","forwardRef","ref","propComponents","mdxType","originalType","parentName","etc","type","args","arguments","argsLength","length","createElementArgArray","Array","newProps","key","hasOwnProperty","call","i","apply","displayName"],"mappings":"iJAKA,MAEMA,EAAaC,EAAc,IAEpBC,EAAoBC,GAAaC,IAC5C,MAAMC,EAAgBC,EAAiBF,EAAMG,YAC7C,SAAQJ,mBAAcC,cAAmBC,MAG9BC,EAAmBC,IAC9B,MAAMC,EAAoBC,EAAWT,GAGrC,MAbuC,mBAaxBO,EACNA,EAAWC,GAGb,IAAIA,KAAsBD,IAGtBG,EAAc,EAAEH,WAAAA,EAAYI,SAAAA,EAAUC,qBAAAA,MACjD,IAAIP,EAAgBC,EAAiBC,GAMrC,OAJIK,IACFP,EAAgBE,KAIfP,EAAWa,UAASC,MAAOT,GAAgBM,IC1B1CI,EAAW,CACfC,WAAY,OACZC,QAAS,EAAEN,SAAAA,KAAcO,EAAEC,EAAU,GAAIR,IAGrCS,EAAmBC,EAAW,CAACjB,EAAOkB,KAC1C,MACEf,WAAYgB,EADRC,QAEJA,EAFIC,aAGJA,EAHIC,WAIJA,KACGC,GACDvB,EAEEG,EAAaD,EAAiBiB,GAQpC,OACSL,EANPX,EAAY,GAAEmB,KAFHF,MAGXjB,EAHWiB,IAIXT,EAJWS,IAKXC,EAEEF,EACkB,CAClBD,IAAAA,KACGK,EACHpB,WAAYgB,GAII,CAACD,IAAAA,KAAQK,MAK/B,WAAyBC,EAAMxB,GAC7B,MAAMyB,EAAOC,UACPN,EAAUpB,GAASA,EAAMoB,QAE/B,GAAoB,iBAATI,GAAqBJ,EAAS,CACvC,MAAMO,EAAaF,EAAKG,OAElBC,EAAwB,IAAIC,MAAMH,GACxCE,EAAsB,GAAKb,EAE3B,MAAMe,EAAW,GACjB,IAAK,IAAIC,KAAOhC,EACViC,eAAeC,KAAKlC,EAAOgC,KAC7BD,EAASC,GAAOhC,EAAMgC,IAI1BD,EAASV,aAAeG,EACxBO,EAAQ,QAAmC,iBAATP,EAAoBA,EAAOJ,EAE7DS,EAAsB,GAAKE,EAE3B,IAAK,IAAII,EAAI,EAAGA,EAAIR,EAAYQ,IAC9BN,EAAsBM,GAAKV,EAAKU,GAGlC,OAAOrB,EAAEsB,MAAM,KAAMP,GAGvB,OAAOf,EAAEsB,MAAM,KAAMX,GA/BvBT,EAAiBqB,YAAc"}